{{define "title"}}New Post{{end}}

{{define "content"}}
<section class="new-post">
    <section class="post-text">
        <div class="raw-container">
            <h2 id="raw-post-title">Raw</h2>
            <textarea class="raw-post" oninput={previewPostBody(this.value)} name="post-content" form="create-post-form"></textarea>
            <form class="upload-markdown-container" enctype="multipart/form-data" hx-post="/upload-markdown" hx-target=".post-text" hx-swap="innerHTML">
                <input type="file" name="markdown">
                <input type="submit" value="Upload Markdown"></button>
            </form>
            <label for="post-title">Title</label>
            <input type="text" name="post-title" oninput={previewPostTitle(this.value)} form="create-post-form">
            <label for="post-slug">Slug</label>
            <input type="text" name="post-slug" form="create-post-form">
            <form class="create-post-container" id="create-post-form" hx-post="/create-post">
                <button type="submit">Create Post</button>
            </form>
        </div>
        <div class="preview-container">
            <h2 id="preview-post-title">Preview</h2>
            <h3 class="preview-title"></h3>
            <div class="preview-post"></div>
        </div>
    </section>
</section>
<script>
    const previewPostBodyElement = document.querySelector(".preview-post")
    function previewPostBody(value) {
        previewPostBodyElement.innerHTML = value
    }
    const previewPostTitleElement = document.querySelector(".preview-title")
    function previewPostTitle(value) {
        previewPostTitleElement.innerHTML = value
    }
</script>
{{end}}